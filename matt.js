let photographs=[
    {location:"Gibraltar",   year:2023, path:"/img/gib2023.webp"},
    {location:"Gibraltar",   year:2023, path:"/img/gib2023b.webp"},
    {location:"Morocco",     year:2020, path:"/img/coupledunes.webp"},
    {location:"Portugal",    year:2019, path:"/img/portugal2019.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018b.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018c.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018d.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018e.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018f.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018g.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018h.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018i.jpg"},
    {location:"Mexico",      year:2020, path:"/img/mexico2020.jpg"},
    {location:"Morocco",     year:2020, path:"/img/morocco2020b.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018j.jpg"},
    {location:"Portugal",    year:2018, path:"/img/portugal2018k.jpg"},
    {location:"UK",          year:2017, path:"/img/uk2017.jpg"},
    {location:"Greece",      year:2017, path:"/img/greece2018.jpg"},
    {location:"Greece",      year:2017, path:"/img/greece2018b.jpg"},
    {location:"Spain",       year:2018, path:"/img/spain2018.jpg"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017.jfif"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017b.jfif"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017c.jfif"},
    {location:"Scotland",    year:2017, path:"/img/anotherlighthouseC.webp"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017e.jfif"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017f.jfif"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017g.jfif"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017h.jfif"},
    {location:"Scotland",    year:2017, path:"/img/scotland2017i.jfif"},
    {location:"UK",          year:2019, path:"/img/uk2019.jpg"},
    {location:"UK",          year:2019, path:"/img/uk2019b.jpg"},
    {location:"Morocco",     year:2020, path:"/img/1man1drom2.webp"},
    {location:"Morocco",     year:2020, path:"/img/1man1drom2bw.webp"},
    {location:"Morocco",     year:2020, path:"/img/3v1.webp"},
    {location:"Morocco",     year:2020, path:"/img/5.webp"},
    {location:"Morocco",     year:2020, path:"/img/anotherfuckingselfie.webp"},
    {location:"Morocco",     year:2020, path:"/img/ants.webp"},
    {location:"Morocco",     year:2020, path:"/img/astro1.2.webp"},
    {location:"Morocco",     year:2020, path:"/img/atreebw.webp"},
    {location:"Morocco",     year:2020, path:"/img/away.webp"},
    {location:"Morocco",     year:2020, path:"/img/bones.webp"},
    {location:"Morocco",     year:2020, path:"/img/breakfastcab.webp"},
    {location:"Morocco",     year:2020, path:"/img/breakfasthash.webp"},
    {location:"Morocco",     year:2020, path:"/img/bugginout.webp"},
    {location:"Morocco",     year:2020, path:"/img/chattinsil.webp"},
    {location:"Morocco",     year:2020, path:"/img/closecall.webp"},
    {location:"Morocco",     year:2020, path:"/img/coming_goingbw.webp"},
    {location:"Morocco",     year:2020, path:"/img/comingto.webp"},
    {location:"Morocco",     year:2020, path:"/img/dreamland1.webp"},
    {location:"Morocco",     year:2020, path:"/img/dreamland2.webp"},
    {location:"Morocco",     year:2020, path:"/img/dreamland3.webp"},
    {location:"Morocco",     year:2020, path:"/img/dreamland3pana.webp"},
    {location:"Morocco",     year:2020, path:"/img/dromnomclose.webp"},
    {location:"Morocco",     year:2020, path:"/img/DSC_0908.webp"},
    {location:"Morocco",     year:2020, path:"/img/dune1.webp"},
    {location:"Morocco",     year:2020, path:"/img/dune2.webp"},
    {location:"Morocco",     year:2020, path:"/img/dune3bw.webp"},
    {location:"Morocco",     year:2020, path:"/img/dune5bw.webp"},
    {location:"Morocco",     year:2020, path:"/img/dune6bw.webp"},
    {location:"Morocco",     year:2020, path:"/img/dunes2.webp"},
    {location:"Morocco",     year:2020, path:"/img/face2face.webp"},
    {location:"Morocco",     year:2020, path:"/img/fourheads.webp"},
    {location:"Morocco",     year:2020, path:"/img/intothedunes.webp"},
    {location:"Morocco",     year:2020, path:"/img/intothewild.webp"},
    {location:"Morocco",     year:2020, path:"/img/landrover-2.webp"},
    {location:"Morocco",     year:2020, path:"/img/lawrenceofthelabia.webp"},
    {location:"Morocco",     year:2020, path:"/img/nomnom.webp"},
    {location:"Morocco",     year:2020, path:"/img/oasis.webp"},
    {location:"Morocco",     year:2020, path:"/img/oasisbed.webp"},
    {location:"Morocco",     year:2020, path:"/img/old_newprint.webp"},
    {location:"Morocco",     year:2020, path:"/img/old_newprintbw.webp"},
    {location:"Morocco",     year:2020, path:"/img/risingcock.webp"},
    {location:"Morocco",     year:2020, path:"/img/sahara self.webp"},
    {location:"Morocco",     year:2020, path:"/img/selfiedessert.webp"},
    {location:"Morocco",     year:2020, path:"/img/selfiedrombw.webp"},
    {location:"Morocco",     year:2020, path:"/img/selfiemirror.webp"},
    {location:"Morocco",     year:2020, path:"/img/selfienowhere.webp"},
    {location:"Morocco",     year:2020, path:"/img/smalldunes.webp"},
    {location:"Morocco",     year:2020, path:"/img/solo1.webp"},
    {location:"Morocco",     year:2020, path:"/img/solodrom.webp"},
    {location:"Morocco",     year:2020, path:"/img/souks.webp"},
    {location:"Morocco",     year:2020, path:"/img/souksdonkybikekid.webp"},
    {location:"Morocco",     year:2020, path:"/img/steptohorizons.webp"},
    {location:"Morocco",     year:2020, path:"/img/textureofsaharagold.webp"},
    {location:"Morocco",     year:2020, path:"/img/tinyhumans.webp"},
    {location:"Morocco",     year:2020, path:"/img/tracks.webp"},
    {location:"Morocco",     year:2020, path:"/img/tracks-1.webp"},
    {location:"Morocco",     year:2020, path:"/img/walkripples.webp"},
    {location:"Morocco",     year:2020, path:"/img/windoverdunes.webp"},
    {location:"Morocco",     year:2020, path:"/img/yetanotherfuckingselfie.webp"},
    {location:"Morocco",     year:2020, path:"/img/yougottabethisbigtoridethedunesmate.webp"},


];
let idNumber=1;
let cartArray=JSON.parse(localStorage.getItem("cart")) || [];   // get cart array from localStorage
let cart=new Set();
let cartTextDynamic=document.querySelector(".cart-text-dynamic");
cartArray.forEach(item=>{cart.add(item)});  //cart set populated (JSON does not support sets)
cartTextDynamic.innerText=cart.size;
cart.size>0? cartTextDynamic.style.color=`var(--gold)` : cartTextDynamic.style.color=`var(--offwhite)`;


let allLocations=new Set(); let allYears=new Set(); let allPaths=new Set();
let burger=document.querySelector(".menu-burger");
let sidebar=document.querySelector(".sidebar");
let sidebarActiveStatus=0;
let mainDiv=document.querySelector(".main");
let filterTag=Array.from(document.getElementsByClassName("filter-tag"));
let currentLocation="All";  // selecting a different location in the website should change this & call drawMain()
let currentYear="All";
let searchText=document.querySelector(".search-text");
let filterSelectionDiv=document.querySelector(".filter-selection-div");

let introDiv=document.querySelector(".intro-div");
let introText=document.querySelector(".intro-text");
let introLeft=document.querySelector(".intro-left");
let introRight=document.querySelector(".intro-right");

let sidebarText1=document.querySelector(".sidebar-text-1");
let sidebarText2=document.querySelector(".sidebar-text-2");
let aboutDiv=document.querySelector(".about-div");
let footerDiv=document.querySelector(".footer");
let footerText=document.querySelector(".footer-text");
let galleryTitleDiv=document.querySelector(".gallery-title");
let headerDiv=document.querySelector(".header");
let aboutDivStatus=0;
let topButton=document.querySelector(".top-button");
let aboutArrow=document.querySelector(".about-arrow");

let imgViewer=document.querySelector(".img-viewer");
let imgViewerImg=document.querySelector(".img-viewer-img");
let imgViewerText=document.querySelector(".img-viewer-text");
let imgViewerProductID=document.querySelector(".img-viewer-product-id");
let imgViewerLocation=document.querySelector(".img-viewer-location");
let imgViewerYear=document.querySelector(".img-viewer-year");
let imgViewerLicensingPrice=document.querySelector(".img-viewer-licensing-price");
let imgViewerOverlay=document.querySelector(".img-viewer-overlay");
let imgViewerX=document.querySelector(".img-viewer-x");
let imgViewerButton=document.querySelector(".img-viewer-button");
let htmlTag=document.getElementsByTagName("html")[0];

let imgViewerWest=document.querySelector(".img-viewer-west");
let imgViewerEast=document.querySelector(".img-viewer-east");

let checkoutMenu=document.querySelector(".checkout-menu");
let checkoutButton=document.querySelector(".checkout-button");

photographs.forEach(object=>{object.id=idNumber;idNumber++;});  // add ID's (DO THIS FIRST)
photographs.sort((a,b)=>b.year-a.year);                         // sort by year

for (let i=0;i<photographs.length;i++){                   // populating sets
    allLocations.add(photographs[i].location);
    allYears.add(photographs[i].year);
    allPaths.add(photographs[i].path);
};
//example

function sidebarAction(){
    if (sidebarActiveStatus===1){   //console.log(`sidebarActiveStatus=0, CLOSING`);
        sidebar.classList.remove("sidebar-open");sidebarActiveStatus=0;return;
    }
    else{sidebar.classList.add("sidebar-open"); sidebarActiveStatus=1;return;
    };
}
function sidebarClose(){sidebar.classList.remove("sidebar-open");sidebarActiveStatus=0;return}
introDiv.onmousedown=function(){sidebarClose()};
aboutDiv.onmousedown=function(){sidebarClose()};
galleryTitleDiv.onmousedown=function(){sidebarClose()};

burger.onclick=(e)=>{
    sidebarAction();
    //console.log(`burger clicked. sidebarActiveStatus=${sidebarActiveStatus}`);
}

let imgPerPage=             16;              // setting how many images in a single mainDiv page (images display in 4 per row)
let paginationTop=          document.querySelector(".pagination-top");
let paginationBottom=       document.querySelector(".pagination-bottom");
let paginationLeftButtons=  Array.from(document.getElementsByClassName("pagination-left-button"));
let paginationRightButtons= Array.from(document.getElementsByClassName("pagination-right-button"));
let paginationNumbers=      Array.from(document.getElementsByClassName("pagination-number"));

function turnToPage(pageInt){   // relies on outer imgPerPage int existing, input is desired page number. is called with (1) for every drawMain()
    let currentPage=+paginationNumbers[0].innerText;
    
    let i=(imgPerPage*(currentPage-1));
    let limit=i+imgPerPage;
    //console.log(`calling turnToPage(${pageInt}) | i = ${i} | limit = ${limit} | imgPerPage = ${imgPerPage} | currentPage = ${currentPage}`);

    // this condition should only be met for page 1 = 1, intended for initializing in tandem with drawMain()
    if (pageInt===currentPage){     //console.log(`turnToPage(1=1) condition`);
        for (i;i<limit;i++){
            if (mainDiv.children[i]===undefined){break};    // if page 1 & less images than imgPerPage (i.e with filters)
            mainDiv.children[i].style.display=`block`;
        };

        paginationLeftButtons.forEach(paginationLeftButton=>{
            paginationLeftButton.style.opacity=`0.2`;
            paginationLeftButton.style.pointerEvents=`none`;
        });
        if (!(mainDiv.childElementCount>imgPerPage)){
            paginationRightButtons.forEach(paginationRightButton=>{
                paginationRightButton.style.opacity=`0.2`;
                paginationRightButton.style.pointerEvents=`none`;
            });
        } else{
            paginationRightButtons.forEach(paginationRightButton=>{
                paginationRightButton.style.opacity=`1`;
                paginationRightButton.style.pointerEvents=`all`;
            });
        };
        return;
    };

    // normal behavior ////////////////////////
    //console.log(`removing displayed elements of old page`);

    for (i;i<limit;i++){
        if (mainDiv.children[i]===undefined){   //console.log(`stopped removing prematurely`);    // prevent error (happens if last page is not full)
            i=limit;
            break;
        };    
        mainDiv.children[i].style.display=`none`
    };  // hides elements of current page

    // check whether intended page is +1 or -1 to current page
    if (pageInt===currentPage+1){limit+=imgPerPage};
    if (pageInt===currentPage-1){i-=(imgPerPage*2);limit-=imgPerPage};
    
    //console.log(`adding new elements`);
    for (i;i<limit;i++){
        if (mainDiv.children[i]===undefined){   //console.log(`stopped adding prematurely`);
        i=limit;
        break;
    };    
        // prevent error (happens if last page is not full)
        mainDiv.children[i].style.display=`block`};     // reveals elements of desired page

    // sets page number text for every paginationNumber element

    if (pageInt===1){
        paginationLeftButtons.forEach(leftButton=>{
            leftButton.style.opacity=`0.2`;
            leftButton.style.pointerEvents=`none`;
        });
    } else {
        paginationLeftButtons.forEach(leftButton=>{
            leftButton.style.opacity=`1`;
            leftButton.style.pointerEvents=`all`;
        });
    };
    
    if (pageInt===Math.ceil(mainDiv.childElementCount/imgPerPage)){
        paginationRightButtons.forEach(rightButton=>{
            rightButton.style.opacity=`0.2`;
            rightButton.style.pointerEvents=`none`;
        });
    } else {
        paginationRightButtons.forEach(rightButton=>{
            rightButton.style.opacity=`1`;
            rightButton.style.pointerEvents=`all`;
        });
    };
    
    paginationNumbers.forEach(paginationNumber=>{paginationNumber.innerText=`${pageInt}`});
    return;
};

// onclicks for page turning buttons
paginationLeftButtons.forEach( leftButton=>{ leftButton.onclick=()=>{ turnToPage(+paginationNumbers[0].innerText-1)}});
paginationRightButtons.forEach(rightButton=>{rightButton.onclick=()=>{turnToPage(+paginationNumbers[0].innerText+1)}});


function drawMain(){        //calling drawMain will redefine main div's innerHTML
    let mainString="";  let a=photographs.length;   // a = total amount of photos
    let validID=new Uint32Array(a);                 // validID is int array with 'a' length
    for (a;a>0;a--){validID[a-1]=a};                // validID's values go 1 through 'a'. eg: [1,2,3,4,5,6,...,a]
    let validIDset=new Set(validID);                // validIDset is created based on validID. next, 'photographs' can be filtered based on ID's in validIDset

    // LOCATION FILTER
    if (currentLocation!="All"){    //if currentLocation is not "All" when drawMain() is called, perform the LOCATION filter on validIDset
        for (let i=0;i<photographs.length;i++){
            if (photographs[i].location!=currentLocation){validIDset.delete(i+1)};
        };
    };
    // YEAR FILTER
    if (currentYear!="All"){        //if currentYear is not "All" when drawMain() is called, perform the LOCATION filter on validIDset
        for (let i=0;i<photographs.length;i++){
            if (photographs[i].year!=currentYear){validIDset.delete(i+1)};
        };
    };
    //////////////
    let b=validIDset.size;
    searchText.innerText=`Displaying ${b} photographs`;
    let path=``;    let id=0;

    for (b;b>0;b--){
        for (let i=0;i<photographs.length;i++){
            if (validIDset.has(i+1)){
                path=photographs[i].path;id=photographs[i].id;
                if (cart.has(id)){    // checkmark in main div
                    mainString+=`<div class="img-case"><img class="gallery-img" width="100%" height="100%" id=${id} x-location=${photographs[i].location} x-year=${photographs[i].year} src="${path}" loading="lazy"/><div class="img-case-checkmark-div"><img class="img-case-checkmark" src="/svg/checkmark-blue.svg"/></div></div>`
                } else{               // no checkmark in main div
                    mainString+=`<div class="img-case"><img class="gallery-img" width="100%" height="100%" id=${id} x-location=${photographs[i].location} x-year=${photographs[i].year} src="${path}" loading="lazy"></div>`;  
                };
                validIDset.delete(i+1);
            };
        };
    };

    if (!mainString.length){
        mainDiv.innerHTML=`<p>CURRENT FILTER <br> MATCHES NO PHOTOGRAPHS</p>`;
        Array.from(paginationNumbers).forEach(paginationNumber=>{paginationNumber.innerText=`1`});  // ensures correct behavior when calling drawMain with filters
        Array.from(paginationRightButtons).forEach(rightButton=>{rightButton.style.opacity=`0.5`;rightButton.style.pointerEvents=`none`});
        Array.from(paginationLeftButtons).forEach( leftButton=>{ leftButton.style.opacity= `0.5`; leftButton.style.pointerEvents=`none`});
        return;
    };
    
    mainDiv.innerHTML=mainString;
    
    let galleryImg=Array.from(document.getElementsByClassName("gallery-img"));
    galleryImg.forEach(img=>{img.onclick=()=>{openImgViewer(img)}});

    Array.from(paginationNumbers).forEach(paginationNumber=>{paginationNumber.innerText=`1`});  // ensures correct behavior when calling drawMain with filters
    turnToPage(1);
    return;
};

drawMain(); //initializing main div

function drawFilterSelection(filter){//console.log(`drawFilterSelection(${filter}) invoked`);
    filter=filter.toUpperCase();
    let string=`<p class="filter-selection-text">${filter}</p><button class="filter-button" id="${filter.toLowerCase()}-all">All</button>`;

    if (filter==="LOCATION"){
        allLocations.forEach(location=>string+=`<button class="filter-button" id="location">${location}</button>`);
    };
    if (filter==="YEAR"){
        allYears.forEach(year=>string+=`<button class="filter-button" id="year">${year}</button>`)
    };

    filterSelectionDiv.innerHTML=string;
    filterSelectionDiv.classList.add("filter-selection-div-on");
    let allButton=Array.from(document.getElementsByClassName("filter-button"))[0];  // the 'ALL' button   in the drop-down filter menu
    let allButtons=Array.from(document.getElementsByClassName("filter-button"));    // all of the buttons in the drop-down filter menu

    if (currentLocation==="All" && filter==="LOCATION" || currentYear==="All" && filter==="YEAR"){allButton.classList.add("filter-button-active")};

    allButtons.forEach(button=>{
        if (button.innerText===currentLocation && filter==="LOCATION" || button.innerText===currentYear && filter==="YEAR"){
            button.classList.add("filter-button-active")};
    });
};

filterTag.forEach(tag=>{tag.onmousedown=function(e){
    drawFilterSelection(tag.id);    //make the filter menu show up with correct options

    filterSelectionDiv.style.left=`${tag.offsetLeft}px`;                  // make the filter menu positioned at the correct tag
    //filterSelectionDiv.style.top=`${tag.offsetTop-window.scrollY}px`;   // for some reason no longer works (possibly changing mainDiv to be position:relative (needed) )
    filterSelectionDiv.style.top=`${e.clientY}px`;

    //this needs to be inside here because 'filter-button' class items only get created after a tag is clicked
    let filterButtons=Array.from(document.getElementsByClassName("filter-button"));
    
    filterButtons.forEach(button=>{button.onmousedown=function(){
        filterButtons.forEach(button=>{button.classList.remove("filter-button-active")});   //remove 'active' from all buttons when a button is clicked
        let name=button.innerText;
        let id=button.id.toLowerCase(); //id of individual button
        button.classList.add("filter-button-active");   //add 'active' to the button clicked
        //console.log(id);
        if (id==="location-all"){currentLocation="All";tag.innerText="LOCATION"};
        if (id==="year-all"){    currentYear="All";    tag.innerText="YEAR"};
        if (id==="location"){    currentLocation=name; tag.innerText=name.toUpperCase()};
        if (id==="year"){        currentYear=name;     tag.innerText=name.toUpperCase()};
        filterSelectionDiv.classList.remove(`filter-selection-div-on`);
        drawMain();
        }});
    };
});

function filterSelectionClose(){
    if (filterSelectionDiv.classList.contains("filter-selection-div-on")){
        filterSelectionDiv.classList.remove(`filter-selection-div-on`);
    };return;
}

mainDiv.onclick=()=>{
    filterSelectionClose();
    sidebarClose();
};
/*
document.body.onload=()=>{

};
*/
function animationsOnStart(){
    if (window.innerHeight>window.innerWidth){
        introText.style.transform= "translateX(1%)";
    } else {
        introText.style.transform= "translateX(62%)";
    };

    introLeft.style.transform= "translateX(0%)";
    introRight.style.transform="translateX(0%)";
};
animationsOnStart();

window.onresize=()=>{
    if (window.innerHeight>window.innerWidth){
        introText.style.transform= "translateX(1%)";
    } else {
        introText.style.transform= "translateX(62%)";
    };
    //  console.log(`resizing: (${window.innerWidth},${window.innerHeight})`);
};

function aboutAction(){
    //show about
    if (aboutDivStatus===0){aboutDivStatus=1;
        aboutDiv.style.transition=`all 1.4s ease-out`;
        aboutDiv.style.transform="translateX(-16%)";
        introDiv.style.transform="translateX(68%)";
        sidebarText1.innerText="HOME";
    //hide about
    } else{
        aboutDivStatus=0;
        aboutDiv.style.transition=`all 1.7s ease-in`;
        aboutDiv.style.transform="translateX(-100%)";
        introDiv.style.transform="translateX(0%)";
        sidebarText1.innerText="ABOUT ME";
    };
}

sidebarText1.onmousedown=()=>{      // clicking 'ABOUT ME' button in the menu
    aboutAction();
    sidebarClose();
};
sidebarText2.onmousedown=()=>{      // clicking 'CONTACT'  button in the menu
    footerText.scrollIntoView();    // scrolls to 'footer-text' (section with all contact information)
    sidebarClose();
};

aboutArrow.onclick=()=>{            // arrow in 'About' section that hides 'About' again (same as going 'HOME' in menu)
    aboutAction();
}

function headerSizer(scrollValue){
    if (scrollValue>5){headerDiv.classList.add("header-shrink"); // slightly shrinks top title div in a snappy way
    } else {           headerDiv.classList.remove("header-shrink")};
    return;
};

function topArrowCheck(scrollValue){
    if (scrollValue>960){topButton.style.left="-6px"     // scroll-to-top arrow appears
    } else {             topButton.style.left="-60px"};  // scroll-to-top arrow disappears
    return;
};

// parallax scrolling between intro-div & everything below done by reducing height of intro-div and having it at lower z-index
function parallaxScroll(x,x1,x2,y1,y2){     // x  = current scroll value | x1 = minimum scroll value for effect to start
    let y=introDiv.style;                   // x2 = maximum scroll value for effect to continue | y1 = maximum intro-div height
    if (x<x1){y.height=`${y1}px`;return};   // y2 = minimum intro-div height | y.height = final result value
    if (x>x2){y.height=`${y2}px`;return};
    y.height=`${y1-((x-x1)*((y1-y2)/(x2-x1)))}px`;


    //500px = 66vh
    // 66vh to 33vh
    return;
};

let introHeight=introDiv.clientHeight;                      // finds what the intro-div height is originally and keeps that (only that) value in store


window.onscroll=()=>{                                       // effects based on scrolling
    let scrollValue=window.pageYOffset;
    filterSelectionClose();                                                 // closes filter drop-down menu on scroll
    sidebarClose();                                                         // closes menu (sidebar) on scroll
    headerSizer(scrollValue);                                               // header height adjustment
    topArrowCheck(scrollValue);                                             // check if will display back-to-top-arrow or not
    parallaxScroll(scrollValue,40,240,introHeight,introHeight/2);           // intro-div parallax scroll. pixel values
};

////////////////////////////////////////////////////////////////////////////////////////
// finding sides of current img in img-viewer based on its index in mainDiv children (it's dynamic due to filters)
function giveImgIndex(idString){  // idString is imgViewerProductID.innerText
    for (let i=0;i<mainDiv.childElementCount;i++){if (mainDiv.children[i].firstChild.id===idString){return i}}; // returns int
   return -1; // something went wrong
};
///////////////////////////////////////////////////////////////////////////////////////

function imgViewerArrowsCheck(index){   // function to make side arrows in img-viewer only show up when appropriate. input is index in mainDiv
    if (mainDiv.children.length===1){                                                   // only 1 image in all of mainDiv
        imgViewerWest.style.opacity=`0`;imgViewerWest.style.pointerEvents=`none`;
        imgViewerEast.style.opacity=`0`;imgViewerEast.style.pointerEvents=`none`;
        return;
    };
    if (index===0){                                                                     // cannot scroll further left
         imgViewerWest.style.opacity=`0`;imgViewerWest.style.pointerEvents=`none`}
    else{imgViewerWest.style.opacity=`1`;imgViewerWest.style.pointerEvents=`all`;
    };
    if (index+1===mainDiv.children.length){                                             // cannot scroll further right
         imgViewerEast.style.opacity=`0`;imgViewerEast.style.pointerEvents=`none`;}
    else{imgViewerEast.style.opacity=`1`;imgViewerEast.style.pointerEvents=`all`;};
    return;
};

function disableScrolling(){
    document.body.style.overflowY="hidden";htmlTag.style.overflowY="hidden";
};
function enableScrolling(){
    document.body.style.overflowY="auto";  htmlTag.style.overflowY="auto";
};

function activateOverlay(){
    imgViewerOverlay.style.filter="opacity(0.8)";
    imgViewerOverlay.style.pointerEvents="all";
    disableScrolling();
};
function deactivateOverlay(){
    imgViewerOverlay.style.filter="opacity(0)";
    imgViewerOverlay.style.pointerEvents="none";
    enableScrolling();
};

function openImgViewer(img){    // input is an img tag (element) from 'main' div
    imgViewerImg.src=img.src;                                                           // image in img-viewer is same as image clicked
    imgViewerProductID.innerText=img.id;                                                // product ID
    imgViewerLocation.innerText=img.attributes.getNamedItem("x-location").value;        // location
    imgViewerYear.innerText=img.attributes.getNamedItem("x-year").value;                // year
    
    imgViewer.style.transform="scale(1)";           // img-viewer shows up
    imgViewer.style.pointerEvents="all";            // img-viewer pointer events active
    
    activateOverlay();

    let index=giveImgIndex(imgViewerProductID.innerText);
    imgViewerArrowsCheck(index);

    if (cart.has(+img.id)){
        imgViewerButton.innerHTML=`IN CART <img class="cart-img-check" src="svg/checkmark-blue.svg"/>`;
        imgViewerButton.classList.add("img-viewer-button-added");
    }
    else {
        imgViewerButton.innerHTML=`ADD TO CART <svg class="cart-img" id="cart" data-name="cart" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.35 28.35">
        <defs><style>.cart-1 {fill: none;stroke: #f8f8f8;stroke-miterlimit: 10;stroke-width: 1.42px;}.cart-2 {fill: #f8f8f8;}</style></defs>
        <line id="bottom-line" class="cart-1" x1="11.99" y1="23.62" x2="18.53" y2="23.62"/>
        <circle id="left-wheel" class="cart-1" cx="9.87" cy="23.62" r="2.78"/>
        <circle id="right-wheel" class="cart-1" cx="21.32" cy="23.62" r="2.78"/>
        <path id="handle" class="cart-1" d="m9.33,21.42c-1.27-5.24-2.54-10.47-3.81-15.71-.04-.22-.11-.39-.2-.52-.64-.93-2.59-.94-4.88-.16"/>
        <path id="cart-outline" class="cart-1" d="m7.85,17.38h12.86c.22.02.42,0,.61-.05,2.89-.77,2.83-9.11,2.82-10.18H5.38"/>
        <polyline id="cart-middle" class="cart-1" points="12.37 17.06 11.63 7.24 17.85 7.24 17.07 17.06"/>
        <line id="cart-middle-2" class="cart-1" x1="6.58" y1="12.27" x2="23.63" y2="12.27"/>
        <circle id="wheel-right-inside" class="cart-2" cx="21.32" cy="23.62" r=".71"/>
        <circle id="wheel-left-inside" class="cart-2" cx="9.87" cy="23.62" r=".71"/>
      </svg>`;
        imgViewerButton.classList.remove("img-viewer-button-added");
    };

    imgViewerImg.style.display="none";                              // experimental, to make images not appear to buffer
    imgViewerImg.onload=()=>{imgViewerImg.style.display="block"};   //

    if  (isZoomable(img)){imgViewerImg.style.pointerEvents=`all`}   // warning, reading 'img' from mainDiv & not imgViewerImg for logic
    else {imgViewerImg.style.pointerEvents=`none`};
};

function closeImgViewer(){
    imgViewer.style.transform="scale(0)";           // scales img-viewer to 0
    imgViewer.style.pointerEvents="none";           // no img-viewer pointer events

    deactivateOverlay();
};

function order(){
    
}

function drawCheckout(){
    let htmlString=`<p class="checkout-title">CHECKOUT<button class="checkout-order">ORDER on Printful</button><img class="checkout-x" src="/svg/x.svg"/></p>
    <div class="checkout-label-div">
      <p class="checkout-label">Photograph</p>
      <p class="checkout-label">Product ID</p>
      <p class="checkout-label">Location</p>
      <p class="checkout-label">Year</p>
      <p class="checkout-label">Price</p>
      <p class="checkout-label">&nbsp;</p>
    </div>`;
    // could prevent this initial part above from re-drawing for smoother behavior?

    let id=``;let location=``;let year=``;let path=``;let price=``; // declaring variables that will later be changed & used

    let photographItem={id:null,location:null,year:null,path:null}; // declaring reference variable that is to be re-referenced with correct object

    cart.forEach(idInt=>{
        for (let i=0;i<photographs.length;i++){
            if (idInt===photographs[i].id){photographItem=photographs[i];break};  // finding correct object of relevant photograph
        };

        id=photographItem.id;
        location=photographItem.location;
        year=photographItem.year;
        path=photographItem.path;
        price=`X£`;

        htmlString+=`<div class="checkout-item-div">
        <img class="checkout-img" src="${path}">
        <p class="checkout-text">${id}</p>
        <p class="checkout-text">${location}</p>
        <p class="checkout-text">${year}</p>
        <p class="checkout-text">${price}</p>
        <p class="checkout-text-remove" id="${id}">REMOVE</p>
        </div>`;
    });

    checkoutMenu.innerHTML=htmlString; 
    let checkoutX=document.querySelector(".checkout-x");    // declaring here fixes checkoutX referencing null
    let orderButton=document.querySelector(".checkout-order");
    checkoutX.onclick=()=>{closeCheckout()};
    orderButton.onclick=()=>{order()};

    let checkoutRemoveArray=Array.from(document.getElementsByClassName("checkout-text-remove"));    // list of 'REMOVE' buttons in checkout menu
    
    checkoutRemoveArray.forEach(removeButton=>{
        removeButton.onclick=()=>{  //console.log(removeButton.parentElement);
            //removeButton.parentElement.style.height=`0rem`;       // trying to make deletion of an item from checkout look smoother but not working
            removeFromCart(+removeButton.id);                       // removeButton.id is originally a string, type conversion
            drawCheckout();                                         // recursive call? lol
        }
    });
    return;
};

function openCheckout(){
    drawCheckout();
    checkoutMenu.style.transform=`scale(1)`;        // checkout menu div appears
    checkoutMenu.style.pointerEvents=`all`;         // checkout menu pointer events active
    activateOverlay();
};

function closeCheckout(){
    checkoutMenu.style.transform=`scale(0)`;        // checkout menu div disappears
    checkoutMenu.style.pointerEvents=`none`;        // checkout menu no pointer events
    deactivateOverlay();
};

imgViewerX.onclick=()=>{        closeImgViewer()};
imgViewerOverlay.onclick=()=>{  closeImgViewer();closeCheckout()};
checkoutButton.onclick=()=>{    openCheckout()};
//checkoutX.onclick=()=>{closeCheckout()};          // doesn't work if declared here, declared inside drawCheckout() instead

function addToCart(id){ // takes number type
    if (typeof id!="number" || id<0 || id>photographs.length){return};  // validation. prevents null from getting into cart
    let sizeBefore=cart.size;
    cart.add(id);
    let sizeAfter=cart.size;
    
    if (sizeAfter>sizeBefore){                                      // if actually added anything to cart set & it wasn't a duplicate
        cartArray.push(id);cartArray.sort((a,b)=>a-b);              // sort the cart set (so it's always ascending order)

        cartTextDynamic.innerText=cart.size;                        // number counter next to cart icon
        if (cart.size){cartTextDynamic.style.color=`var(--gold)`};  // if cart is not empty, counter color is gold

        localStorage.setItem("cart",JSON.stringify(cartArray));     // updating cart in localStorage

        //drawMain();      // redraw main to have checkmarks updated in mainDiv, looks dumb & is costly, better way below

        // PROCESS OF ADDING CHECKMARKS TO MAIN DIV DYNAMICALLY
        Array.from(mainDiv.children).forEach(imgCase=>{
            if (cart.has(+imgCase.children[0].id) && imgCase.children.length===1){  // imgCase children is normally 1 - gallery-img. is 2 if checkmark
                let checkmarkDiv = document.createElement("div");
                checkmarkDiv.classList.add("img-case-checkmark-div");
                checkmarkDiv.innerHTML=`<img class="img-case-checkmark" src="/svg/checkmark-blue.svg"/>`;
                imgCase.appendChild(checkmarkDiv)};
        });

    };
    if (!cart.size){cartTextDynamic.style.color=`var(--offwhite)`}; // if cart is empty, counter color is white
    return;
};

function removeFromCart(id){    // takes number type
    cart.delete(id);

        for (let i=0;i<cartArray.length;i++){                                           // check all id's in cart set
            if (cartArray[i]===id){                                                     // found value to be deleted in cartArray
                for (let j=i;j<cartArray.length-1;j++){cartArray[j]=cartArray[j+1]};    // overwrite value of deleted item in cartArray
                cartArray.pop();                                                        // shorten cartArray length by 1
                break;                                                                  // breaking from for-loop above
            };
        };

        cartTextDynamic.innerText=cart.size;                                            // setting visible cart number 
        if (cart.size){cartTextDynamic.style.color=`var(--gold)`};                      // if cart is not empty, counter color is gold
        localStorage.setItem("cart",JSON.stringify(cartArray));                         // updating cart in localStorage

        // PROCESS OF REMOVING CHECKMARKS DYNAMICALLY FROM MAIN DIV
        Array.from(mainDiv.children).forEach(imgCase=>{                                 // checking all img-case elements
            if (imgCase.children.length===2 && !cart.has(+imgCase.children[0].id)){     // if img-case has 2 children (image & checkmark) AND not supposed to have checkmark
                imgCase.removeChild(imgCase.children[1])};                              // removes checkmark div from img-case
        });

    if (!cart.size){cartTextDynamic.style.color=`var(--offwhite)`};                     // if cart is empty, counter color is white
    return;
};

imgViewerButton.onclick=()=>{                                                           // 'ADD TO CART' button clicked (only works with pointer events)
    addToCart(+imgViewerProductID.innerText);                                                       // type conversion to int
    imgViewerButton.innerHTML=`IN CART <img class="cart-img-check" src="svg/checkmark-blue.svg"/>`; // changing the button
    imgViewerButton.classList.add("img-viewer-button-added");                                       //
    return;
};

/////////////////////////////////////////////////////////////////////// WEST & EAST BUTTONS ////////////////////////

let imgViewerMovingItems=[imgViewerImg,imgViewerText,imgViewerButton];  // array of all items that need same effects applied, for cleaner code

function westAction(){  //console.log(`westAction() called`);

    if ( (Date.now()-lastKeyPressTime)<keyDelay ){lastKeyPressTime=Date.now();return};  // delayer to prevent key spam
    lastKeyPressTime=Date.now();    // update key timer

    let index=giveImgIndex(imgViewerProductID.innerText);                               // finds index in mainDiv of current image, type int
    
    imgViewerWest.style.pointerEvents=`none`;                                           // prevent spamming with mouse
    imgViewerEast.style.pointerEvents=`none`;
    
    if (index>0){
        let time=200;   // assuming 0.2s
        let i=0;
        
        for (i;i<imgViewerMovingItems.length;i++){imgViewerMovingItems[i].style.left=`100%`};   // moves away the necessary items of img-viewer
        
        let ogTransitionValue=window.getComputedStyle(imgViewerMovingItems[0]).getPropertyValue("transition");
        // [0] here because assuming all imgViewerMovingItems will have the same transition
        // we store this, remove it (for instant element visual repositioning), then bring it back for the 2nd transition
        
        setTimeout(function(){
            for (i=0;i<imgViewerMovingItems.length;i++){
                imgViewerMovingItems[i].style.transition=`all 0s ease 0s`;    // turning off transition to warp items back to the other side faster
                imgViewerMovingItems[i].style.zIndex=`-1`;
                imgViewerMovingItems[i].style.left=`-100%`;                   // teleporting items to the other side
            };
            let nextImg=mainDiv.children[index-1].firstChild;                 // find the image to the West (left) according to mainDiv

            imgViewerImg.src=``;imgViewerImg.src=nextImg.src;                 // reset the src first for better visual behavior
            imgViewerLocation.innerText=nextImg.attributes.getNamedItem("x-location").value;
            imgViewerYear.innerText=nextImg.attributes.getNamedItem("x-year").value;
            imgViewerProductID.innerText=nextImg.id;
            //imgViewerLicensingPrice=nextImg.attributes.                     // currently inactive

            if (cart.has(+nextImg.id)){
                imgViewerButton.innerHTML=`IN CART <img class="cart-img-check" src="svg/checkmark-blue.svg"/>`;
                imgViewerButton.classList.add("img-viewer-button-added");
            }
            else {
                imgViewerButton.innerHTML=`ADD TO CART <svg class="cart-img" id="cart" data-name="cart" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.35 28.35">
                <defs><style>.cart-1 {fill: none;stroke: #f8f8f8;stroke-miterlimit: 10;stroke-width: 1.42px;}.cart-2 {fill: #f8f8f8;}</style></defs>
                <line id="bottom-line" class="cart-1" x1="11.99" y1="23.62" x2="18.53" y2="23.62"/>
                <circle id="left-wheel" class="cart-1" cx="9.87" cy="23.62" r="2.78"/>
                <circle id="right-wheel" class="cart-1" cx="21.32" cy="23.62" r="2.78"/>
                <path id="handle" class="cart-1" d="m9.33,21.42c-1.27-5.24-2.54-10.47-3.81-15.71-.04-.22-.11-.39-.2-.52-.64-.93-2.59-.94-4.88-.16"/>
                <path id="cart-outline" class="cart-1" d="m7.85,17.38h12.86c.22.02.42,0,.61-.05,2.89-.77,2.83-9.11,2.82-10.18H5.38"/>
                <polyline id="cart-middle" class="cart-1" points="12.37 17.06 11.63 7.24 17.85 7.24 17.07 17.06"/>
                <line id="cart-middle-2" class="cart-1" x1="6.58" y1="12.27" x2="23.63" y2="12.27"/>
                <circle id="wheel-right-inside" class="cart-2" cx="21.32" cy="23.62" r=".71"/>
                <circle id="wheel-left-inside" class="cart-2" cx="9.87" cy="23.62" r=".71"/>
              </svg>`;
                imgViewerButton.classList.remove("img-viewer-button-added");
            };

            imgViewerImg.style.display="none";                                  // experimental - stop buffering until ready to load
            imgViewerImg.onload=()=>{imgViewerImg.style.display="block"};       //

            if  (isZoomable(nextImg)){imgViewerImg.style.pointerEvents=`all`}
            else {imgViewerImg.style.pointerEvents=`none`};
        },time);

        setTimeout(function(){
            for (i=0;i<imgViewerMovingItems.length;i++){
                imgViewerMovingItems[i].style.transition=ogTransitionValue;   // return original transition value
                imgViewerMovingItems[i].style.left=`0%`;                      // start moving items from the left (-100) to view (0)
                imgViewerMovingItems[i].style.zIndex=`inherit`;
            };
        },time+100);
    };
    imgViewerArrowsCheck(index-1);                                            // performs arrow check on now-current img in img-viewer
    return;
};

///////////////////////////////////// SAME BUT FOR EAST BUTTON (RIGHT) //////////////
function eastAction(){  //console.log(`eastAction() called`);

    if ( (Date.now()-lastKeyPressTime)<keyDelay ){lastKeyPressTime=Date.now();return};  // delayer to prevent key spam
    lastKeyPressTime=Date.now();                                                        // update key timer

    let index=giveImgIndex(imgViewerProductID.innerText);
    
    imgViewerEast.style.pointerEvents=`none`;   // prevent spamming with clicks
    imgViewerWest.style.pointerEvents=`none`;   //

    if (index+1<mainDiv.children.length && index!=-1){
        let time=200;   // assuming 0.2s
        let i=0;
        
        for (i;i<imgViewerMovingItems.length;i++){imgViewerMovingItems[i].style.left=`-100%`};
        let ogTransitionValue=window.getComputedStyle(imgViewerMovingItems[0]).getPropertyValue("transition");

        setTimeout(function(){
            for (i=0;i<imgViewerMovingItems.length;i++){
                imgViewerMovingItems[i].style.transition=`all 0s ease 0s`;
                imgViewerMovingItems[i].style.zIndex=`-1`;
                imgViewerMovingItems[i].style.left=`100%`;
            };
            let nextImg=mainDiv.children[index+1].firstChild;               // img to the right
            imgViewerImg.src=``;imgViewerImg.src=nextImg.src;
            imgViewerLocation.innerText=nextImg.attributes.getNamedItem("x-location").value;
            imgViewerYear.innerText=nextImg.attributes.getNamedItem("x-year").value;
            imgViewerProductID.innerText=nextImg.id;

            if (cart.has(+nextImg.id)){
                imgViewerButton.innerHTML=`IN CART <img class="cart-img-check" src="svg/checkmark-blue.svg"/>`;
                imgViewerButton.classList.add("img-viewer-button-added");
            }
            else {
                imgViewerButton.innerHTML=`ADD TO CART <svg class="cart-img" id="cart" data-name="cart" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.35 28.35">
                <defs><style>.cart-1 {fill: none;stroke: #f8f8f8;stroke-miterlimit: 10;stroke-width: 1.42px;}.cart-2 {fill: #f8f8f8;}</style></defs>
                <line id="bottom-line" class="cart-1" x1="11.99" y1="23.62" x2="18.53" y2="23.62"/>
                <circle id="left-wheel" class="cart-1" cx="9.87" cy="23.62" r="2.78"/>
                <circle id="right-wheel" class="cart-1" cx="21.32" cy="23.62" r="2.78"/>
                <path id="handle" class="cart-1" d="m9.33,21.42c-1.27-5.24-2.54-10.47-3.81-15.71-.04-.22-.11-.39-.2-.52-.64-.93-2.59-.94-4.88-.16"/>
                <path id="cart-outline" class="cart-1" d="m7.85,17.38h12.86c.22.02.42,0,.61-.05,2.89-.77,2.83-9.11,2.82-10.18H5.38"/>
                <polyline id="cart-middle" class="cart-1" points="12.37 17.06 11.63 7.24 17.85 7.24 17.07 17.06"/>
                <line id="cart-middle-2" class="cart-1" x1="6.58" y1="12.27" x2="23.63" y2="12.27"/>
                <circle id="wheel-right-inside" class="cart-2" cx="21.32" cy="23.62" r=".71"/>
                <circle id="wheel-left-inside" class="cart-2" cx="9.87" cy="23.62" r=".71"/>
              </svg>`;
                imgViewerButton.classList.remove("img-viewer-button-added");
            };

            //imgViewerLicensingPrice=nextImg.attributes.                   // currently inactive

            imgViewerImg.style.display="none";                              // experimental - stop buffering until ready to load
            imgViewerImg.onload=()=>{imgViewerImg.style.display="block"};   //

            if  (isZoomable(nextImg)){imgViewerImg.style.pointerEvents=`all`}
            else {imgViewerImg.style.pointerEvents=`none`};
        },time);

        setTimeout(function(){
            for (i=0;i<imgViewerMovingItems.length;i++){
                imgViewerMovingItems[i].style.transition=ogTransitionValue;
                imgViewerMovingItems[i].style.left=`0%`;
                imgViewerMovingItems[i].style.zIndex=`inherit`;
            };
        },time+100);
    };
    imgViewerArrowsCheck(index+1);                                          // arrow check on now-current img in img-viewer
};

imgViewerWest.onclick=()=>{westAction()};
imgViewerEast.onclick=()=>{eastAction()};
//////////////////////////////////////////////////////////////////////////////////////////////////////


let lastKeyPressTime=Date.now();    // UNIX time tracker to prevent key spam
let keyDelay= 400; // ms

document.onkeydown=(e)=>{   //console.log(e.key);
    
    if ( (Date.now()-lastKeyPressTime)<keyDelay ){lastKeyPressTime=Date.now();return};  // delayer to prevent key spam

    if(e.key=="Escape"){
    closeImgViewer();closeCheckout();
    };
    if (e.key==="ArrowLeft"){
        if (giveImgIndex(imgViewerProductID.innerText)===0){return} // prevents bug where wrong button reappers after using key
        else {westAction()};
    };
    if (e.key==="ArrowRight"){
        if (giveImgIndex(imgViewerProductID.innerText)+1===mainDiv.children.length){return} // same bug fix
        else {eastAction()};
    };
    lastKeyPressTime=Date.now();    // update key timer
};

// footer descriptions ///////////////////////////////////////////////////////
let footerTerms=           document.querySelector(".footer-terms");
let footerTermsTitle=      document.querySelector(".footer-terms-title");
let footerTermsStatus=     false;

let footerPrivacy=         document.querySelector(".footer-privacy");
let footerPrivacyTitle=    document.querySelector(".footer-privacy-title");
let footerPrivacyStatus=   false;

let footerCopyright=       document.querySelector(".footer-copyright");
let footerCopyrightTitle=  document.querySelector(".footer-copyright-title");
let footerCopyrightStatus= false;

function footerAction(description,status){                          // will change the description visibility and
    if (status){description.style.fontSize=`0px`;   return false}   // return a boolean value that sets a status for the next call
    else {    description.style.fontSize= `12px`;   return true};
};

footerTermsTitle.onclick=()=>{
    footerTermsStatus=footerAction(footerTerms,footerTermsStatus);
};
footerPrivacyTitle.onclick=()=>{
    footerPrivacyStatus=footerAction(footerPrivacy,footerPrivacyStatus);
};
footerCopyrightTitle.onclick=()=>{
    footerCopyrightStatus=footerAction(footerCopyright,footerCopyrightStatus);
};

/////// IMG VIEWER IMG MAGNIFIER //////////////////////////////////////////////////////

let magnifier=document.querySelector(".magnifier");
let magnifierStatus=false;

function magnifierAction(){
    if (magnifierStatus){
        magnifier.style.pointerEvents=`none`;
        magnifier.style.backgroundImage=``;
        magnifier.style.opacity=`0`;
        magnifierStatus=false;
    }
    else {
        magnifier.style.pointerEvents=`all`;
        magnifier.style.backgroundImage=`url(${imgViewerImg.src})`;
        magnifier.style.opacity=`1`;
        magnifierStatus=true;
    };
};

function magnifierMovement(x,y){
    magnifier.style.backgroundPositionX=`${((x/window.innerWidth) *100)}%`;
    magnifier.style.backgroundPositionY=`${((y/window.innerHeight)*100)}%`;
    return;
};

magnifier.onmousemove=(e)=>{magnifierMovement(e.clientX,e.clientY)};

imgViewerImg.onclick=()=>{  magnifierAction()};
magnifier.onclick=()=>{     magnifierAction()};

function isZoomable(imgElement){    // sometimes reads wrong values (before they are updated) if using imgViewerImg as imgElement, so use precursor elements instead!
    if (imgElement.naturalWidth>window.innerWidth && imgElement.naturalHeight>window.innerHeight){
        return true;
    };
    return false;
};

let ropeTop=    document.querySelector(".rope-top");
let ropeBottom= document.querySelector(".rope-bottom");

let collectionsTitleButton=document.querySelector(".gallery-title-collections");
let galleryTitleButton=document.querySelector(".gallery-title-gallery");
let collectionsTabSelected=false;

let searchDiv=document.querySelector(".search-div");
let collectionsDiv=document.querySelector(".collections-div");

function collectionsTabAction(){
    ropeTop.style.right=    `25%`;
    ropeBottom.style.right=  `0%`;
    searchDiv.style.transform=  `translateX(100%)`;
    mainDiv.style.transform=            `translateX(100%)`;  
    mainDiv.style.height=`${collectionsDiv.clientHeight}px`;
    collectionsDiv.style.transform=     `translateX(100%)`;
    collectionsTitleButton.style.opacity=`1`;
    collectionsTitleButton.style.pointerEvents=`none`;
    collectionsTitleButton.style.top=`0`;
    galleryTitleButton.style.opacity=`0.2`;
    galleryTitleButton.style.pointerEvents=`all`;
    galleryTitleButton.style.top=`5px`;
    paginationTop.style.transform=   `translateX(100%)`;
    paginationBottom.style.transform=`translateX(100%)`;
    filterSelectionClose();
    collectionsTabSelected=true;
    return;
};
function galleryTabAction(){
    ropeTop.style.right=    `0%`;
    ropeBottom.style.right=`25%`;
    searchDiv.style.transform=  `translateX(0%)`;
    mainDiv.style.transform=     `translateX(0%)`;
    mainDiv.style.height= `auto`;
    collectionsDiv.style.transform= `translateX(0%)`;
    collectionsTitleButton.style.opacity=`0.2`;
    collectionsTitleButton.style.pointerEvents=`all`;
    collectionsTitleButton.style.top=`5px`;
    galleryTitleButton.style.opacity=`1`;
    galleryTitleButton.style.pointerEvents=`none`;
    galleryTitleButton.style.top=`0`;
    paginationTop.style.transform=`translateX(0%)`;
    paginationBottom.style.transform=`translateX(0%)`;
    collectionsTabSelected=false;
    return;
};

collectionsTitleButton.onclick=()=>{ collectionsTabAction()};
galleryTitleButton.onclick=()=>{     galleryTabAction()};

let collectionsTitle=Array.from(document.getElementsByClassName("collections-title"));

function recordCollectionsHeights(){    // will record the natural height of each 'collections-text' into its 'x-height' attribute, then set
    collectionsTitle.forEach(title=>{   // height to 0. then, title.onclick goes back & forth between 0 and x-height
        let text=title.nextElementSibling;                          // the 'collections-text' paired with each 'collections-title'
        text.setAttribute("x-height",`${text.clientHeight}px`);
        text.style.height=`0px`;
        title.onclick=()=>{ //console.log(`clicked title ${title.innerText} | text.clientHeight = ${text.clientHeight}`);
            if (text.clientHeight===0){text.style.height=text.attributes.getNamedItem("x-height").value}
            else {text.style.height=`0px`};
            mainDiv.style.height=`${collectionsDiv.clientHeight}px`;    // guarantees 'collections' will always have enough height
        };
    });
};
recordCollectionsHeights();

